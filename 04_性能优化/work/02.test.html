<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>requestAnimationFrame</title>
  <style>
    #box1 {
      width: 100px;
      height: 100px;
      background: pink;
      position: absolute;
    }

    #box2 {
      width: 100px;
      height: 100px;
      background: pink;
      position: absolute;
      top: 200px;
    }
  </style>
</head>
<body>
<div id="box1"></div>
<div id="box2"></div>
<script type="text/javascript">
  /*
  window.requestAnimationFrame()
		window.requestAnimationFrame() 方法告诉浏览器您希望执行动画并请求浏览器在下一次重绘之前调用指定的函数来更新动画
		该方法使用一个回调函数作为参数，这个回调函数会在浏览器重绘之前调用。

		回调函数会被传入一个参数，DOMHighResTimeStamp，指示requestAnimationFrame() 开始触发回调函数的当前时间

		返回值
			一个 long 整数，请求 ID ，是回调列表中唯一的标识。是个非零值，没别的意义。
			你可以传这个值给 window.cancelAnimationFrame() 以取消回调函数。

		window.cancelAnimationFrame(requestID)
	 		取消一个先前通过调用window.requestAnimationFrame()方法添加到计划中的动画帧请求.
	 		requestID是先前调用window.requestAnimationFrame()方法时返回的ID.
   */

  var box1 = document.getElementById('box1');
  var box2 = document.getElementById('box2');
  var i = 0,
    j = 0;

  var lastTime = Date.now();

  var timer = setInterval(function () {
    box1.style.left = ++i * 5 + 'px';
    if (Date.now() - lastTime >= 2000) {
      clearInterval(timer);
    }
  }, 1000 / 60)

  window.requestAnimationFrame(step);

  function step(time) {
    box2.style.left = ++j * 5 + 'px';
    if (time < 2000) {
      window.requestAnimationFrame(step);
    }
  }

</script>
</body>
</html>